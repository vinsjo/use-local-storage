var t=require("safe-json-decode"),e=require("react");module.exports=function(r,o,n){void 0===o&&(o=null),void 0===n&&(n=!1);const[c,u]=e.useState(!1),[a,f]=e.useState(r),[i,s]=e.useState(()=>{const e="function"==typeof o?o():o,r=function(e,r){void 0===r&&(r=!1);try{const r=localStorage.getItem(e);return null===r?null:t.decode(r)||r}catch(t){if(r)throw t;return null}}(a);return n||!r&&o!==r?e:r});return e.useEffect(()=>{c&&r!==a&&(function(t,e){void 0===e&&(e=!1);try{localStorage.removeItem(t)}catch(t){if(e)throw t;return!1}}(a),f(r))},[c,r,a,f]),e.useEffect(()=>{!function(e,r,o){void 0===o&&(o=!1);try{const o=r instanceof Object||Array.isArray(r)?t.encode(r):r;localStorage.setItem(e,o)}catch(t){if(o)throw t;return!1}}(a,i)},[i,a]),e.useEffect(()=>{u(!0)},[]),[i,s]};
//# sourceMappingURL=index.cjs.map
