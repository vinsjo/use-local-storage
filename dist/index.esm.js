import{decode as t,encode as r}from"safe-json-decode";import{useState as o,useEffect as n}from"react";const e=function(r,o){void 0===o&&(o=!1);try{const o=localStorage.getItem(r);return null===o?null:t(o)||o}catch(t){if(o)throw t;return null}},c=function(t,o,n){void 0===n&&(n=!1);try{const n=o instanceof Object||Array.isArray(o)?r(o):o;return localStorage.setItem(t,n),!0}catch(t){if(n)throw t;return!1}},u=function(t,r){void 0===r&&(r=!1);try{return localStorage.removeItem(t),!0}catch(t){if(r)throw t;return!1}},i=function(t,r,i){void 0===r&&(r=null),void 0===i&&(i=!1);const[a,l]=o(!1),[f,s]=o(t),[d,m]=o(()=>{const t="function"==typeof r?r():r,o=e(f);return i||!o&&r!==o?t:o});return n(()=>{a&&t!==f&&(u(f),s(t))},[a,t,f,s]),n(()=>{c(f,d)},[d,f]),n(()=>{l(!0)},[]),[d,m]};export{i as default,e as getStoredItem,u as removeStoredItem,c as setStoredItem};
//# sourceMappingURL=index.esm.js.map
