import{decode as t,encode as o}from"safe-json-decode";import{useState as r,useEffect as n}from"react";const e=function(e,c,i){void 0===c&&(c=null),void 0===i&&(i=!1);const[a,u]=r(!1),[l,f]=r(e),[s,d]=r(()=>{const o="function"==typeof c?c():c,r=function(o,r){void 0===r&&(r=!1);try{const r=localStorage.getItem(o);return null===r?null:t(r)||r}catch(t){if(r)throw t;return null}}(l);return i||!r&&c!==r?o:r});return n(()=>{a&&e!==l&&(function(t,o){void 0===o&&(o=!1);try{localStorage.removeItem(t)}catch(t){if(o)throw t;return!1}}(l),f(e))},[a,e,l,f]),n(()=>{!function(t,r,n){void 0===n&&(n=!1);try{const n=r instanceof Object||Array.isArray(r)?o(r):r;localStorage.setItem(t,n)}catch(t){if(n)throw t;return!1}}(l,s)},[s,l]),n(()=>{u(!0)},[]),[s,d]};export{e as default};
//# sourceMappingURL=index.esm.js.map
