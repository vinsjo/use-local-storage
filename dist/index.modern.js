import{decode as t,encode as r}from"safe-json-decode";import{useState as e,useEffect as o}from"react";const n=(n,c=null,a=!1)=>{const[l,u]=e(!1),[s,f]=e(n),[i,m]=e(()=>{const r="function"==typeof c?c():c,e=((r,e=!1)=>{try{const e=localStorage.getItem(r);return null===e?null:t(e)||e}catch(t){if(e)throw t;return null}})(s);return a||!e&&c!==e?r:e});return o(()=>{l&&n!==s&&(((t,r=!1)=>{try{localStorage.removeItem(t)}catch(t){if(r)throw t;return!1}})(s),f(n))},[l,n,s,f]),o(()=>{((t,e,o=!1)=>{try{const o=e instanceof Object||Array.isArray(e)?r(e):e;localStorage.setItem(t,o)}catch(t){if(o)throw t;return!1}})(s,i)},[i,s]),o(()=>{u(!0)},[]),[i,m]};export{n as default};
//# sourceMappingURL=index.modern.js.map
